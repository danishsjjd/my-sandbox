import{s as N,t as o,r as M,i as n,B as z,e as B,b as k,a as E}from"./chunks/BWdGfrob.js";import{a as T,C as A,u as q,g as I,b as a,M as x,f as b,S as v,F as $,d as P,j as H}from"./chunks/B9oOvFnE.js";import{d as L}from"./chunks/DuOu2luD.js";import"./chunks/Cpj98o6Y.js";var j=o('<svg viewBox="0 0 256 256"width=1.2em height=1.2em><g fill=currentColor><path d="M216 96v112a8 8 0 0 1-8 8H48a8 8 0 0 1-8-8V96a8 8 0 0 1 8-8h160a8 8 0 0 1 8 8"opacity=.2></path><path d="M208 80h-32V56a48 48 0 0 0-96 0v24H48a16 16 0 0 0-16 16v112a16 16 0 0 0 16 16h160a16 16 0 0 0 16-16V96a16 16 0 0 0-16-16M96 56a32 32 0 0 1 64 0v24H96Zm112 152H48V96h160zm-68-56a12 12 0 1 1-12-12a12 12 0 0 1 12 12">');const y=(t={})=>(()=>{var l=j();return N(l,t,!0,!0),l})();var D=o('<svg viewBox="0 0 256 256"width=1.2em height=1.2em><g fill=currentColor><path d="M208 88h-56V32Z"opacity=.2></path><path d="M224 152a8 8 0 0 1-8 8h-24v16h16a8 8 0 0 1 0 16h-16v16a8 8 0 0 1-16 0v-56a8 8 0 0 1 8-8h32a8 8 0 0 1 8 8M92 172a28 28 0 0 1-28 28h-8v8a8 8 0 0 1-16 0v-56a8 8 0 0 1 8-8h16a28 28 0 0 1 28 28m-16 0a12 12 0 0 0-12-12h-8v24h8a12 12 0 0 0 12-12m88 8a36 36 0 0 1-36 36h-16a8 8 0 0 1-8-8v-56a8 8 0 0 1 8-8h16a36 36 0 0 1 36 36m-16 0a20 20 0 0 0-20-20h-8v40h8a20 20 0 0 0 20-20M40 112V40a16 16 0 0 1 16-16h96a8 8 0 0 1 5.66 2.34l56 56A8 8 0 0 1 216 88v24a8 8 0 0 1-16 0V96h-48a8 8 0 0 1-8-8V40H56v72a8 8 0 0 1-16 0m120-32h28.69L160 51.31Z">');const F=(t={})=>(()=>{var l=D();return N(l,t,!0,!0),l})();var O=o('<div class="flex h-screen w-full flex-col items-center justify-center text-muted-foreground"><p class="text-center text-2xl font-semibold">Login to view content'),Z=o('<div class="flex h-screen w-full flex-col items-center justify-center text-muted-foreground"><p class="text-center text-2xl font-semibold">Subscribe to view content'),C=o("<span class=uppercase>"),R=o("<span>Save PDF"),U=o('<h1 class="text-center print:hidden">Vu Buddy - <span class=uppercase>'),W=o('<div data-pdf-viewer class="prose isolate h-fit w-screen max-w-none select-none bg-background px-5 py-6 prose-img:my-0 print:p-0"><span class="fixed inset-x-0 top-[50vh] -z-10 mt-auto hidden -translate-y-1/2 -rotate-45 whitespace-nowrap text-center text-[60px] font-bold uppercase text-muted-foreground opacity-20 print:block">Vu Buddy</span><section class="hidden h-screen w-full flex-col items-center justify-center bg-background print:flex"><img alt="Vu Buddy Logo"class="!mb-8 !mt-auto size-20"><h1 class=text-center>Vu Buddy</h1><footer class="mt-auto pt-8 text-center text-sm text-muted-foreground">Printed by </footer></section><ol></ol><footer class="pt-8 text-center text-sm text-muted-foreground">Printed by '),X=o("<li class=break-inside-avoid><ol class=list-lower-alpha>"),G=o("<li>");T(A.ContentScript);const J=new URLSearchParams(location.search),S=J.get("quiz_id");S||window.close();const m=await L.quizzes.where("quiz_id").equals(S).toArray().then(t=>t.filter(l=>l.text));function V(t,l=""){const e=document.createElement("div");if(e.innerText=t,e.className=l,!t.includes("![image]"))return e;const c=Array.from(e.childNodes).map(function s(i){if(i.nodeType===Node.TEXT_NODE)return i.textContent?i:void 0;if(i.nodeType!==Node.COMMENT_NODE)return Array.from(i.childNodes).map(s)}).flat().filter(Boolean);for(const s of c){const i=s.nodeValue.matchAll(/!\[image\]\(([^)]+)\)/gim),h=[];let d=0;for(const u of i){if(u.index>d){const r=s.nodeValue.slice(d,u.index);h.push(document.createTextNode(r)),d+=r.length}const p=document.createElement("img");p.src=u[1],p.className="inline max-w-[520px] w-full",h.push(p),d+=u[0].length}d<s.nodeValue.length&&h.push(document.createTextNode(s.nodeValue.slice(d,s.nodeValue.length))),s.replaceWith(...h)}return e}function K(){const{user:t,isSubscribed:l}=q();return I(()=>{t()&&requestIdleCallback(()=>{requestIdleCallback(()=>window.print())})}),a(H,{get children(){return[a(x,{get when(){return!t()},get children(){var e=O(),c=e.firstChild;return n(e,a(y,{class:"mb-2 size-12"}),c),e}}),a(x,{get when(){return b(()=>!!t())()&&!l()},get children(){var e=Z(),c=e.firstChild;return n(e,a(y,{class:"mb-2 size-12"}),c),e}}),a(x,{get when(){return b(()=>!!t())()&&l()},get children(){var e=W(),c=e.firstChild;c.firstChild;var s=c.nextSibling,i=s.firstChild,h=i.nextSibling;h.firstChild;var d=h.nextSibling;d.firstChild;var u=s.nextSibling,p=u.nextSibling;return p.firstChild,n(c,a(v,{get when(){return m.length},get children(){return["- ",(()=>{var r=C();return n(r,()=>m.at(0).course),r})()]}}),null),n(h,a(v,{get when(){return m.length},get children(){return["- ",(()=>{var r=C();return n(r,()=>m.at(0).course),r})()]}}),null),n(d,()=>t().id,null),n(e,a(z,{class:"absolute right-4 top-4 print:hidden",variant:"secondary",onClick:()=>window.print(),get children(){return[a(F,{}),R()]}}),u),n(e,a(v,{get when(){return m.length},get children(){var r=U(),f=r.firstChild,g=f.nextSibling;return n(g,()=>m.at(0).course),r}}),u),n(u,a($,{each:m,children:r=>(()=>{var f=X(),g=f.firstChild;return n(f,()=>V(r.text,"font-semibold"),g),n(g,a($,{get each(){return r.options},children:_=>(()=>{var w=G();return n(w,()=>V(_.text,B("inline-block",r.selected_answer===_.id&&"bg-green-300"))),w})()})),f})()})),n(p,()=>t().id,null),P(()=>k(i,"src",E("/assets/icon-128.png"))),e}})]}})}M(K,document.getElementById("app"));
